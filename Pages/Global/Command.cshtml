@page
@model MVP_Core.Pages.Global.CommandModel
@{
    ViewData["Title"] = "NovaGodView Command Console";
}
<div class="container-fluid px-4 py-4">
    <h2 class="mb-4">NovaGodView — Command Console</h2>
    <div class="row row-cols-1 row-cols-md-3 row-cols-lg-5 g-4">
        @foreach (var card in Model.Metrics)
        {
            @await Html.PartialAsync("/Pages/Shared/_MetricsCard.cshtml", card)
        }
    </div>
    @if (Model.Forecast != null)
    {
        <div class="forecast-display mt-5 p-4 rounded shadow-sm bg-white">
            <h4 class="mb-3"><i class="fas fa-chart-line text-primary"></i> Predictive Insights (Next 7 Days)</h4>
            <div class="row g-3">
                <div class="col-md-3 col-6">
                    <div class="forecast-metric">
                        <div class="forecast-label">Projected Requests</div>
                        <div class="forecast-value">@Model.Forecast.ProjectedRequests</div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="forecast-metric">
                        <div class="forecast-label">Avg. Delay (min)</div>
                        <div class="forecast-value">@Model.Forecast.AverageDelayMinutes</div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="forecast-metric">
                        <div class="forecast-label">Projected Revenue</div>
                        <div class="forecast-value text-success">$@Model.Forecast.ProjectedRevenue.ToString("N0")</div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="forecast-metric">
                        <div class="forecast-label">Tech Gap</div>
                        <div class="forecast-value text-danger">@Model.Forecast.TechnicianGap</div>
                    </div>
                </div>
            </div>
        </div>
    }
    @if (Model.ProActions != null && Model.ProActions.Count > 0)
    {
        <div class="proaction-queue mt-5">
            <h4 class="mb-3"><i class="fas fa-bolt text-warning"></i> ProAction Queue</h4>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                @foreach (var action in Model.ProActions)
                {
                    <div class="col">
                        @await Html.PartialAsync("/Pages/Shared/_ProActionCard.cshtml", action)
                    </div>
                }
            </div>
        </div>
    }
</div>
