@page
@model ErrorModel
@{
    ViewData["Title"] = "Oops! Something Broke";
    Layout = "~/Pages/Shared/_Layout.cshtml"; // ✅ Corrected relative layout path
}

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        window.onload = function () {
            const duration = 2000;
            const end = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 1000 };

            function random(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(() => {
                const timeLeft = end - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                confetti({
                    ...defaults,
                    particleCount: 30,
                    origin: {
                        x: random(0.1, 0.9),
                        y: Math.random() - 0.2
                    }
                });
            }, 250);
        };
    </script>
}

<div class="text-center mt-5">
    <div class="pipe-alert mb-4">
        <svg width="120" height="80" viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
            <g class="pipe">
                <rect x="0" y="30" width="100" height="20" rx="4" ry="4" fill="#555" />
                <rect x="100" y="25" width="10" height="30" fill="#a00">
                    <animate attributeName="opacity" values="1;0;1" dur="1s" repeatCount="indefinite" />
                </rect>
            </g>
            <text x="5" y="20" font-size="12" fill="red">⚠️ Pipe Leak!</text>
        </svg>
    </div>

    <h1 class="display-4 text-danger fw-bold">💥 OOPS!</h1>
    <h2 class="text-dark">SOMETHING WENT WRONG</h2>

    <p class="lead mt-3">
        The page you’re looking for took a wrong turn at Albuquerque.<br />
        It either doesn’t exist anymore or never did... kinda like your last contractor’s promises.
    </p>

    <p class="text-muted">
        If you clicked a link, congrats — you’ve discovered a broken trail.<br />
        Don’t worry, we’ve already sent a team of angry code monkeys to investigate.
    </p>

    <div class="mt-4">
        <a href="/" class="btn btn-outline-primary me-3">🔙 Return Home</a>
        <a href="/Contact" class="btn btn-outline-dark">📞 Contact Us</a>
    </div>

    <hr class="my-4" />

    <h5 class="text-primary">🔥 Still sweating the details?</h5>
    <p>
        Check out our Plumbing, Heating, Cooling & Water Filtration services —<br />
        Always expert, always fair, and always way better than this error message.
    </p>

    <p class="fw-bold text-success">💸 Lowest Prices Every Day. Zero Bugs Guaranteed.</p>
</div>

<style>
    .pipe-alert {
        animation: pulse 0.8s infinite;
        display: flex;
        justify-content: center;
    }

    @@keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05) rotate(-1deg); }
        100% { transform: scale(1); }
    }
</style>
