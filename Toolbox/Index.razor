@page "/toolbox"
@using MVP_Core.Data.Models
@using MVP_Core.Pages.Admin.BlazorAdmin.Shared
@layout MVP_Core.Pages.Admin.BlazorAdmin.Shared._BlazorAdminLayout

<h3>Admin Toolbox</h3>
<p>This page contains quick links to internal admin features, tools, and resources.</p>

<ul>
    @foreach (var link in Links)
    {
        <li>
            <a href="@link.Url" target="@(link.IsExternal ? "_blank" : "_self")">
                @link.Title
            </a> - @link.Description
        </li>
    }
</ul>

<hr />

<h4>🔄 Sync Strategy Plan</h4>
<ol>
    <li>
        <strong>Enable Snapshot Sync (Schema)</strong><br />
        Use <code>SqlPackage</code> or <code>dotnet ef migrations script</code> to create a deployable schema script or <code>.dacpac</code>. This ensures schema changes from <code>service-atlanta-db-dev</code> can be migrated to <code>service-atlanta-db</code>.
    </li>
    <li>
        <strong>Data Sync (Live Records)</strong><br />
        Create SQL Server Agent jobs or scheduled PowerShell scripts that run <code>MERGE</code> or <code>UPSERT</code> operations for tables like <code>AdminUsers</code>, <code>SEOs</code>, etc., from dev to prod.
    </li>
    <li>
        <strong>Production Protection</strong><br />
        Lock down <code>service-atlanta-db</code> for read/write access except by admin accounts or sync jobs. Add database-level role restrictions if needed.
    </li>
    <li>
        <strong>Automation & Alerts</strong><br />
        Schedule syncs with <code>Task Scheduler</code> or <code>SQL Server Agent</code>. Add failure logging and email alerts via <code>sp_send_dbmail</code> or external API (like SendGrid).
    </li>
    <li>
        <strong>Test Before Full Sync</strong><br />
        Start with one table (e.g., <code>AdminUsers</code>) as a test. Once proven, expand to other entities. Sync can occur nightly or on commit/tag pushes.
    </li>
</ol>

@code {
    private List<AdminPageLink> Links = new()
    {
        new AdminPageLink("Blazor Admin Dashboard", "/BlazorAdmin/Dashboard", "Main dashboard to view and manage service requests"),
        new AdminPageLink("SEO Manager", "/BlazorAdmin/SEO", "Edit and preview SEO metadata"),
        new AdminPageLink("Settings Panel", "/BlazorAdmin/Settings", "Global admin settings"),
        new AdminPageLink("Error Page", "/Error", "Displays fallback Razor error page"),
        new AdminPageLink("Home Index", "/", "Default landing page for the website"),
        new AdminPageLink("Google Admin Console", "https://admin.google.com", "Manage Gmail and DNS records", true),
        new AdminPageLink("HVAC Supplier Login", "https://example-supplier.com", "HVAC parts ordering portal", true)
    };
}
